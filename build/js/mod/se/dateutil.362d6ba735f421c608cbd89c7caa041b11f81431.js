/*! Copyright (c) SESHENGHUO.COM - Author: LIJUN - Email: zwlijun@gmail.com - Git: https://github.com/zwlijun/se.lib */
define(function(require,exports,module){module.exports={parse:function(a,b){function c(a){return"undefined"==typeof a?0:parseInt(a,10)}function d(a,b){for(var c=b.replace(/[^%yMdhmsi]+/g,""),d=c.split("%"),e=d.length,f=1;e>f;f++)if(d[f]==a)return f-1;return void 0}var e="";b=b||"%y%M%d%h%m%s",e=b,b=b.replace("%y","(\\d{4})"),b=b.replace("%M","(\\d{1,2})"),b=b.replace("%d","(\\d{1,2})"),b=b.replace("%h","(\\d{1,2})"),b=b.replace("%m","(\\d{1,2})"),b=b.replace("%s","(\\d{1,2})"),b=b.replace("%i","(\\d{1,3})"),b=b.replace("%w","(星期[日|一|二|三|四|五|六])"),b=b.replace("%W","(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)"),b=b.replace("%a","(日|一|二|三|四|五|六)"),b=b.replace("%A","(Sun\\.|Mon\\.|Tues\\.|Wed\\.|Thur\\.|Fri\\.|Sat\\.)");var f,g,h,i,j,k,l,m=new RegExp("^"+b+"$"),n=m.exec(a),o=d("y",e),p=d("M",e),q=d("d",e),r=d("h",e),s=d("m",e),t=d("s",e),u=d("i",e),v=void 0===o&&void 0===p&&void 0===q&&void 0===r&&void 0===s&&void 0===t&&void 0===u,w=!1,x=new Date;return null!=n&&(n.shift(),f=void 0===o?x.getFullYear():c(n[o]),g=void 0===p?x.getMonth():c(n[p])-1,h=void 0===q?x.getDate():c(n[q]),i=void 0===r?x.getHours():c(n[r]),j=void 0===s?x.getMinutes():c(n[s]),k=void 0===t?x.getSeconds():c(n[t]),l=void 0===u?x.getMilliseconds():c(n[u]),x=new Date(f,g,h,i,j,k,l),w=!1===v&&x.getFullYear()===f&&x.getMonth()===g&&x.getDate()===h&&x.getHours()===i&&x.getMinutes()===j&&x.getSeconds()===k&&x.getMilliseconds()===l),{ok:w,date:x}},format:function(a,b,c){var d=a.getFullYear(),e=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes(),i=a.getSeconds(),j=a.getMilliseconds(),k=a.getDay(),l=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],m=["日","一","二","三","四","五","六"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["Sun.","Mon.","Tues.","Wed.","Thur.","Fri.","Sat."];return c="boolean"==typeof c?c:!0,b=b||"%y%M%d%h%m%s%i %w",b=b.replace("%y",d),b=b.replace("%M",c&&10>e?"0"+e:e),b=b.replace("%d",c&&10>f?"0"+f:f),b=b.replace("%h",c&&10>g?"0"+g:g),b=b.replace("%m",c&&10>h?"0"+h:h),b=b.replace("%s",c&&10>i?"0"+i:i),b=b.replace("%i",c&&100>j?10>j?"00"+j:"0"+j:j),b=b.replace("%w",l[k]),b=b.replace("%W",n[k]),b=b.replace("%a",m[k]),b=b.replace("%A",o[k])},dateDiff:function(a,b,c){var d=0;switch(a){case"y":d=c.getFullYear()-b.getFullYear();break;case"q":d=(c.getMonth()+1+12*(c.getFullYear()-b.getFullYear())-(b.getMonth()+1))/3;break;case"n":d=c.getMonth()+1+12*(c.getFullYear()-b.getFullYear())-(b.getMonth()+1);break;case"d":d=(c-b)/864e5;break;case"w":d=(c-b)/6048e5;break;case"h":d=(c-b)/36e5;break;case"m":d=(c-b)/6e4;break;case"s":d=(c-b)/1e3;break;case"i":d=c.getTime()-b.getTime();break;default:d=c.getTime()-b.getTime()}return d},dateAdd:function(a,b,c){switch(a){case"y":b.setFullYear(b.getFullYear()+c);break;case"q":b.setMonth(b.getMonth()+3*c);break;case"n":b.setMonth(b.getMonth()+c);break;case"d":b.setDate(b.getDate()+c);break;case"w":b.setDate(b.getDate()+7*c);break;case"h":b.setHours(b.getHours()+c);break;case"m":b.setMinutes(b.getMinutes()+c);break;case"s":b.setSeconds(b.getSeconds()+c);break;case"i":b.setMilliseconds(b.getMilliseconds()+c);break;default:b.setMilliseconds(b.getMilliseconds()+c)}return b},leapYear:function(a){var b=[31,28,31,30,31,30,31,31,30,31,30,31],c=!1,d=365;return a.getFullYear()%4===0&&a.getFullYear()%100!==0||a.getFullYear()%400===0?(b.splice(1,1,29),c=!0,d=366):(b.splice(1,1,28),c=!1,d=365),{isLeapYear:c,days:b,yearDays:d,monthDays:b[a.getMonth()]}}}});